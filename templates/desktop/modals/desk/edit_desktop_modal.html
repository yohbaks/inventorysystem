<div class="modal fade" id="editDesktopModal" tabindex="-1" aria-labelledby="editDesktopModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <form method="POST"
      action="{% if desktop_detailsx %}{% url 'update_desktop' pk=desktop_detailsx.id %}{% else %}#{% endif %}">
      {% csrf_token %}
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title" id="editDesktopModalLabel">Edit Desktop</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>

        <div class="modal-body">
          <!-- âœ… FIXED: Hidden field matches your JS (exclude_id) -->
          <input type="hidden" id="editDesktopID" value="{{ desktop_detailsx.id }}">

          <div class="mb-3">
            <label for="editDesktopSN" class="form-label">Serial Number</label>
            <input 
              type="text" 
              class="form-control" 
              id="editDesktopSN" 
              name="desktop_sn_form" 
              value="{{ desktop_detailsx.serial_no }}" 
              required>
          </div>

          <div class="mb-3">
            <label for="desktop_brand_form" class="form-label">Brand</label>
            <select class="form-select form-control" id="desktop_brand_form" name="desktop_brand_form" required>
              <option value="" disabled>Select Brand</option>
              {% for brandD in desktop_brands %}
                <option value="{{ brandD.id }}"
                        {% if desktop_detailsx.brand_name.id == brandD.id %}selected{% endif %}>
                  {{ brandD.name }}
                </option>
              {% endfor %}
            </select>
          </div>

          <div class="mb-3">
            <label for="desktop_model_form" class="form-label">Model</label>
            <input type="text" class="form-control" id="desktop_model_form" name="desktop_model_form" value="{{ desktop_detailsx.model }}" required>
          </div>

          <div class="mb-3">
            <label for="desktop_proccessor_form" class="form-label">Processor</label>
            <select class="form-select form-control" id="desktop_proccessor_form" name="desktop_proccessor_form" required>
              <optgroup label="Core i9 (Desktop)">
                <option value="i9-14900K" {% if desktop_detailsx.processor == 'i9-14900K' %}selected{% endif %}>Core i9-14900K (14th Gen)</option>
                <option value="i9-13900K" {% if desktop_detailsx.processor == 'i9-13900K' %}selected{% endif %}>Core i9-13900K (13th Gen)</option>
                <option value="i9-12900K" {% if desktop_detailsx.processor == 'i9-12900K' %}selected{% endif %}>Core i9-12900K (12th Gen)</option>
                <option value="i9-11900K" {% if desktop_detailsx.processor == 'i9-11900K' %}selected{% endif %}>Core i9-11900K (11th Gen)</option>
                <option value="i9-10900K" {% if desktop_detailsx.processor == 'i9-10900K' %}selected{% endif %}>Core i9-10900K (10th Gen)</option>
              </optgroup>

              <optgroup label="Core i7 (Desktop)">
                <option value="i7-14700K" {% if desktop_detailsx.processor == 'i7-14700K' %}selected{% endif %}>Core i7-14700K (14th Gen)</option>
                <option value="i7-13700K" {% if desktop_detailsx.processor == 'i7-13700K' %}selected{% endif %}>Core i7-13700K (13th Gen)</option>
                <option value="i7-12700K" {% if desktop_detailsx.processor == 'i7-12700K' %}selected{% endif %}>Core i7-12700K (12th Gen)</option>
                <option value="i7-11700K" {% if desktop_detailsx.processor == 'i7-11700K' %}selected{% endif %}>Core i7-11700K (11th Gen)</option>
              </optgroup>

              <optgroup label="Core i5 (Desktop)">
                <option value="i5-14600K" {% if desktop_detailsx.processor == 'i5-14600K' %}selected{% endif %}>Core i5-14600K (14th Gen)</option>
                <option value="i5-13600K" {% if desktop_detailsx.processor == 'i5-13600K' %}selected{% endif %}>Core i5-13600K (13th Gen)</option>
                <option value="i5-12600K" {% if desktop_detailsx.processor == 'i5-12600K' %}selected{% endif %}>Core i5-12600K (12th Gen)</option>
                <option value="i5-11600K" {% if desktop_detailsx.processor == 'i5-11600K' %}selected{% endif %}>Core i5-11600K (11th Gen)</option>
              </optgroup>
            </select>
          </div>

          <div class="mb-3">
            <label for="desktop_memory_form" class="form-label">Memory</label>
            <input type="text" class="form-control" id="desktop_memory_form" name="desktop_memory_form" value="{{ desktop_detailsx.memory }}" required>
          </div>

          <div class="mb-3">
            <label for="desktop_drive_form" class="form-label">Drive</label>
            <input type="text" class="form-control" id="desktop_drive_form" name="desktop_drive_form" value="{{ desktop_detailsx.drive }}" required>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="submit" class="btn btn-primary">Update Desktop Package</button>
        </div>
      </div>
    </form>
  </div>
</div>
