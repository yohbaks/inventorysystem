<div class="modal fade" id="addMonitorModal" tabindex="-1" aria-labelledby="addMonitorModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addMonitorModalLabel">Add New Monitor</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      {% if equipment_package and equipment_package.id %}
      <form method="POST" id="addMonitorForm" action="{% url 'add_monitor_to_package' equipment_package.id %}">
        {% csrf_token %}
        <div class="modal-body">
          
          <!-- Tabs for Manual or Salvage -->
          <ul class="nav nav-pills mb-3" id="monitorAddTabs" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="manual-tab" data-bs-toggle="pill" href="#manual-input" role="tab">Manual Input</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="salvage-tab" data-bs-toggle="pill" href="#salvage-select" role="tab">From Salvage</a>
            </li>
          </ul>

          <div class="tab-content" id="monitorAddTabsContent">
            
            <!-- Manual Input -->
            <div class="tab-pane fade show active" id="manual-input" role="tabpanel">
              <div class="mb-3">
                <label for="monitor_sn" class="form-label">Serial Number</label>
                <input type="text" class="form-control" id="monitor_sn" name="monitor_sn">
              </div>
              <div class="mb-3">
                <label for="monitor_brand" class="form-label">Brand</label>
                <select class="form-select form-control" id="monitor_brand" name="monitor_brand_db">
                  <option value="" disabled selected>Select Brand</option>
                  {% for brandMonitor in monitor_brands %}
                    <option value="{{ brandMonitor.id }}">{{ brandMonitor.name }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="mb-3">
                <label for="monitor_model" class="form-label">Model</label>
                <input type="text" class="form-control" id="monitor_model" name="monitor_model">
              </div>
              <div class="mb-3">
                <label for="monitor_size" class="form-label">Size</label>
                <input type="text" class="form-control" id="monitor_size" name="monitor_size">
              </div>
            </div>

            <!-- Salvaged Monitors -->
            <div class="tab-pane fade" id="salvage-select" role="tabpanel">
              <div class="mb-3">
                <label for="salvaged_monitor" class="form-label">Choose Salvaged Monitor</label>
                <select class="form-select" id="salvaged_monitor" name="salvaged_monitor_id">
                  <option value="" disabled selected>Select Salvaged Monitor</option>
                  {% for salvaged in salvaged_monitors %}
                    <option value="{{ salvaged.id }}">
                      {{ salvaged.monitor_sn }} - {{ salvaged.monitor_brand }} ({{ salvaged.monitor_model }})
                    </option>
                  {% empty %}
                    <option disabled>No salvaged monitors available</option>
                  {% endfor %}
                </select>
              </div>
            </div>


          </div>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Add Monitor</button>
        </div>
      </form>
      {% else %}
      <p class="text-danger">Desktop package not available. Please create it first.</p>
      {% endif %}
    </div>
  </div>
</div>